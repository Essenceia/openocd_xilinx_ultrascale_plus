set bit_path "/home/gp/rtl/led_blink/out/project_prj_checkpoint.bit"
set svf_path "/home/gp/rtl/led_blink/out/project_prj_checkpoint.svf"

source [find interface/jlink.cfg]
transport select jtag

set SPEED 1
jtag_rclk $SPEED
adapter speed $SPEED 
reset_config none

# jlink config

set CHIPNAME XCKU3P
set CHIP $CHIPNAME
puts "set chipname "$CHIP

source [find ../openocd/tcl/cpld/xilinx-xcu.cfg]


puts "Read temperature sysmon 4" 

source [find ../openocd/tcl/fpga/xilinx-sysmon.cfg]

init 

puts "--------------------"

sysmon_report $CHIP.tap

puts "--------------------"

# program
if {![file exists $bit_path]} {
	puts "Bit path not found : $bit_path"
	exit
}

#virtex2 refresh $CHIP.pld
#pld load $CHIP.pld $bit_path

svf $svf_path -progress 
 
exit 


